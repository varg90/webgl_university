<!doctype html>
<html lang="en">
    <head>
        <title>University</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>
    <body>

        <script src="js/Three.js"></script>
        <script src="js/ColladaLoader.js"></script>
        <script src="js/Detector.js"></script>
        <script src="js/Stats.js"></script>
        <script src="js/movement.js"></script>

        <script type="text/javascript">

            if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

            var container, stats;

            var camera, scene, renderer, objects;
            var particleLight, pointLight;
            var dae, skin;

            var loader = new THREE.ColladaLoader();
            loader.options.convertUpAxis = true;
            
            loader.load( 'university.dae', function colladaReady( collada ) {
                dae = collada.scene;
                dae.scale.x = dae.scale.y = dae.scale.z = 500;
                dae.updateMatrix();
        
                init();
                animate();
            } );
            
            function init() {

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                scene = new THREE.Scene();

                camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.set( 40, 0, 30 );
                scene.add( camera );

                controls = new THREE.TrackballControls( camera );
                controls.target.set( 0, 0, 0 );
                
                // Add the COLLADA

                scene.add( dae );

                particleLight = new THREE.Mesh( 
                new THREE.SphereGeometry( 4, 8, 8 ), 
                new THREE.MeshBasicMaterial( { color: 0xffffff } ) 
            );
                scene.add( particleLight );

                // Lights

                scene.add( new THREE.AmbientLight( 0xcccccc ) );

                pointLight = new THREE.PointLight( 0xaaaaaa, 4 );
                pointLight.position = particleLight.position;
                scene.add( pointLight );

                renderer = new THREE.WebGLRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );

                container.appendChild( renderer.domElement );

                stats = new Stats();
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.top = '0px';
                container.appendChild( stats.domElement );

            }

            camera.lookAt( scene.position );
            function animate() {
                requestAnimationFrame( animate );

                render();
                stats.update();
            }

            function render() {
                renderer.render( scene, camera );
            }

        </script>
    </body>
</html>
